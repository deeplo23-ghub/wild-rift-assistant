# Architecture

> Auto-generated by /map on 2026-02-26

## Overview

The Wild Rift Draft Assistant is a real-time analytical tool designed to optimize the drafting phase of *League of Legends: Wild Rift*. It provides synergistic pick recommendations, counter-analysis, and team composition gap detection using a custom scoring engine.

```
┌─────────────────────────────────────────┐
│              [Next.js App]              │
│        (React + Framer Motion)          │
├─────────────────────────────────────────┤
│              [tRPC API]                 │
│        (Procedures & Context)           │
├─────────────────────────────────────────┤
│            [Data Layer]                 │
│     (Prisma + Neon PostgreSQL)           │
└─────────────────────────────────────────┘
        ↑                 ↑
[Scraper Pipeline]  [Seeder Script]
  (Puppeteer)        (Data Sync)
```

## Components

### 1. Scoring Engine
- **Purpose:** Mathematical core that calculates champion scores based on 7+ components (Synergy, Counter, Tier, Risk, etc.).
- **Location:** `src/lib/scoring/`
- **Key Files:** `engine.ts`, `base.ts`

### 2. Draft UI
- **Purpose:** Interactive dashboard for tracking bans and picks for both Ally and Enemy teams.
- **Location:** `src/components/draft/`
- **Key Files:** `TeamPanel.tsx`, `ChampionPool.tsx`, `MatchupAnalysis.tsx`

### 3. Data Pipeline
- **Purpose:** Extracts meta-game statistics from external websites and populates the database.
- **Location:** `scripts/`
- **Key Files:** `scrape.ts`, `seed.ts`

### 4. State Management
- **Purpose:** Centralized draft state (picks, bans, settings) using Zustand.
- **Location:** `src/store/`
- **Key Files:** `draftStore.ts`

## Data Flow

1. **Scraping:** `scripts/scrape.ts` pulls raw data from community sites using Puppeteer.
2. **Seeding:** `scripts/seed.ts` normalizes raw data and pushes it to PostgreSQL via Prisma.
3. **API Layer:** tRPC routes (`src/lib/trpc/router.ts`) fetch champions and counter matrices from the DB.
4. **UI Update:** `draftStore` manages the active draft; whenever state changes, the `Scoring Engine` recalculates recommendations in <100ms.
5. **Insights:** `MatchupAnalysis` displays the final strategic breakdown once the draft is complete.

## Integration Points

| Service | Type | Purpose |
|---------|------|---------|
| Neon.tech | DB | Serverless PostgreSQL for champion data |
| Vercel | Hosting | Frontend and serverless API functions |
| WR-Meta / Jungler.gg | External | Source of truth for win rates and matchups |

## Technical Debt

- [ ] Transition remaining image assets to official Riot Data Dragon URLs.
- [ ] Implement robust error boundaries for the tRPC query failures.
- [ ] Add unit tests for the background scraper's normalization logic.

## Conventions

**Naming:** PascalCase for React components, camelCase for variables/functions, kebab-case for IDs.
**Structure:** Feature-grouped components with a shared UI library (`src/components/ui`).
**Testing:** Vitest for scoring engine unit tests.
